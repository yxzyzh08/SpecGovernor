# **📝 需求规格概要：AI增强型研发流程治理系统**

## **一、术语与缩略语解释 (Terminology and Glossary)**

| 术语/缩略语 | 英文全称 | 解释说明 |
| :---- | :---- | :---- |
| **SDLC** | Software Development Life Cycle | 软件开发生命周期，指从规划、设计、编码、测试到部署的整个软件开发过程。 |
| **RD** | Requirements Document | 需求文档。侧重于**用户和业务目标**，描述**系统应该做什么**。 |
| **PRD** | Product Requirements Document | 产品需求文档。侧重于**产品功能**，描述**实现哪些功能来满足需求**，包含用户故事、功能清单等。 |
| **DD** | Design Document | 软件设计文档。侧重于**技术实现**，描述**如何构建系统**，包含系统架构、模块划分、API 接口定义、数据库设计等。 |
| **TD** | Test Document | 测试文档。侧重于**验证标准**，描述**如何测试**系统，包含测试策略、测试用例等。 |
| **Agent** | AI Agent | 具有特定目标和能力的、基于 **Claude Code AI 助手** 等大模型的软件智能体。在本系统中指 RD Agent, PRD Agent 等。 |
| **流程编排器** | Orchestrator | 负责定义、管理和执行 AI Agent 流程的软件核心组件。负责状态流转、上下文注入和流程强制执行。 |
| **RAG** | Retrieval-Augmented Generation | 检索增强生成。**【注：本方案已明确约束，不采用此技术作为知识库】**。 |

## **二、项目目标 (Project Goals)**

| ID | 目标描述 | 达成标准 |
| :---- | :---- | :---- |
| **G-1** | **流程规范化与自动化** | 将人为定义的严格 SDLC 流程转化为可由软件工具和 AI Agent 自动执行的流程。 |
| **G-2** | **文档代码持续一致性** | 消除 RD/PRD/DD/TD/Code 之间的语义不一致，实现自动化、高精度的持续校验。 |
| **G-3** | **提升研发效率** | 利用 AI Agent 自动生成文档、代码和测试用例，大幅减少人工撰写和评审时间。 |
| **G-4** | **支持中小型复杂项目** | 系统需能应对代码量在 100 万行以下的中型复杂项目，并保证流程的低摩擦运行。 |

## **三、功能需求 (Functional Requirements \- FR)**

| ID | 需求类别 | 需求描述 | 关键交互组件 |
| :---- | :---- | :---- | :---- |
| **FR-1.1** | **文档生成** | 系统需支持多个独立的 AI Agent (e.g., RD Agent, PRD-A Agent) 基于上游文档和提示词，生成新的文档草稿或子模块文档。 | 文档生成 Agent 族 |
| **FR-1.2** | **结构化持久化** | 系统需具备**结构化文档管理服务**，对所有文档（RD/PRD/DD/TD）进行版本化存储，并能输出 JSON/YAML 等结构化格式。 | 结构化文档管理服务 |
| **FR-2.1** | **变更监听与触发** | 系统需实时监听 Git、Jira、Confluence 等基础数据源的变更事件。 | 集成连接器, 流程编排器 |
| **FR-2.2** | **影响分析** | **一致性守护 Agent** 需能够根据任一文档或代码的变更，推理并输出一个**结构化的影响范围列表**（受影响的上下游文档和代码模块）。 | 一致性守护 Agent |
| **FR-2.3** | **一致性校验** | 系统需支持高精度、跨文档的语义一致性校验，输出结构化的**差异报告**。 | 一致性守护 Agent |
| **FR-3.1** | **流程强制执行** | **流程编排器**需能够根据校验结果和人为定义的规则，自动在外部工具（如 Jira）中创建同步任务，并**阻塞**关键操作（如 Git 合并、文档发布）。 | 流程编排器, 集成连接器 |
| **FR-4.1** | **代码/测试生成** | **代码与测试 Agent** 需能基于 DD 和 PRD 的上下文，生成满足规范的测试用例和代码片段。 | 代码与测试 Agent 族 |

## **四、非功能需求与约束 (Non-Functional Requirements & Constraints \- NFR)**

| ID | 类别 | 约束描述 | 对设计的影响 |
| :---- | :---- | :---- | :---- |
| **NFR-1** | **架构约束 (核心)** | **禁止**使用统一的向量数据库 (RAG/Vector DB) 作为知识持久化层。 | **流程编排器 (Orchestrator)** 必须承担上下文检索和拼接工作。 |
| **NFR-2** | **上下文管理** | 流程中的所有 AI Agent 必须通过**流程编排器**提供的**精准裁剪和拼接**的上下文来工作。 | 编排器必须具备上下文裁剪和注入的能力，以保证效率和可靠性。 |
| **NFR-3** | **Agent 结构** | 必须采用**去中心化、多 Agent 族**的结构，支持同一文档层级（如 PRD）拆分为多个子任务 Agent。 | 需保证 Agent 间的接口协议（输入/输出 Schema）清晰、稳定。 |
| **NFR-4** | **输出规范** | 所有关键的 AI Agent 输出（如影响分析报告、差异报告）必须是**结构化数据**（如 JSON/YAML），以便编排器进行后续处理。 |  |
| **NFR-5** | **可靠性** | 流程必须提供足够的容错机制，以应对 AI Agent 潜在的非确定性或错误输出。 | 流程的关键节点必须设置**人工仲裁 (Human-in-the-Loop)** 机制。 |

## **五、关键交付流程：严格的变更同步机制**

该流程必须通过**流程编排器**强制执行：

| 阶段 (Step) | 主要活动 | 变更同步规则 (触发机制) |
| :---- | :---- | :---- |
| **阶段 1** | **需求定义 (RD)** | 需求变更 $\\to$ **流程编排器**触发 PRD Agent 重新分析，**一致性守护 Agent** 检查影响范围。 |
| **阶段 2** | **产品设计 (PRD)** | PRD 变更 $\\to$ **必须**触发 RD 审阅 $\\to$ 必须触发 DD/TD 影响分析。 |
| **阶段 3** | **软件设计 (DD)** | DD 变更 $\\to$ **必须**触发 PRD 审阅 $\\to$ **必须**触发 RD 审阅 $\\to$ 必须触发 TD/Code 影响分析。 |
| **阶段 4** | **测试设计 (TD)** | TD 变更 $\\to$ **必须**触发 DD 审阅 $\\to$ 确保测试用例与设计文档完全匹配。 |
| **阶段 5** | **编码与测试 (Code)** | 代码提交 $\\to$ **一致性守护 Agent** 自动比对代码与 DD/TD $\\to$ 校验通过才允许合并。 |

